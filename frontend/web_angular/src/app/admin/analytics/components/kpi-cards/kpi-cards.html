<div class="kpi-container">
  <div *ngIf="kpiData$ | async as response" class="kpi-grid">
    <!-- Total Jobs -->
    <div class="kpi-card">
      <div class="kpi-icon jobs-icon">
        <svg viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"/>
        </svg>
      </div>
      <div class="kpi-content">
        <h3 class="kpi-label">Total Jobs</h3>
        <p class="kpi-value">{{ response.data.totalJobs }}</p>
        <p class="kpi-metric">All-time</p>
      </div>
    </div>

    <!-- Jobs Posted Last 7 Days -->
    <div class="kpi-card">
      <div class="kpi-icon recent-icon">
        <svg viewBox="0 0 24 24" fill="currentColor">
          <path d="M16 6l2.29 2.29-4.58 4.58 4.58 4.58-2.29 2.29L9.42 13l6.58-7zm-6 0L7.71 8.29 12.29 13l-4.58 4.58L8 19.87 14.58 13 8 6z"/>
        </svg>
      </div>
      <div class="kpi-content">
        <h3 class="kpi-label">Jobs Posted (7 Days)</h3>
        <p class="kpi-value">{{ response.data.jobsLast7Days }}</p>
        <p class="kpi-metric">This week</p>
      </div>
    </div>

    <!-- Total Users -->
    <div class="kpi-card">
      <div class="kpi-icon users-icon">
        <svg viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
        </svg>
      </div>
      <div class="kpi-content">
        <h3 class="kpi-label">Total Users</h3>
        <p class="kpi-value">{{ response.data.totalUsers }}</p>
        <p class="kpi-metric">All-time</p>
      </div>
    </div>

    <!-- New Users Last 7 Days -->
    <div class="kpi-card">
      <div class="kpi-icon growth-icon">
        <svg viewBox="0 0 24 24" fill="currentColor">
          <path d="M13 12h8v6h-8z M17 8.82L8.84 17 4 12.16 2.41 13.59 8.84 20 22 6.82z"/>
        </svg>
      </div>
      <div class="kpi-content">
        <h3 class="kpi-label">New Users (7 Days)</h3>
        <p class="kpi-value">{{ response.data.newUsersLast7Days }}</p>
        <p class="kpi-metric">This week</p>
      </div>
    </div>

    <!-- Total Applications -->
    <div class="kpi-card">
      <div class="kpi-icon applications-icon">
        <svg viewBox="0 0 24 24" fill="currentColor">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-8-6z M16 18H8v-2h8v2z M16 14H8v-2h8v2z M14 9H8V7h6v2z"/>
        </svg>
      </div>
      <div class="kpi-content">
        <h3 class="kpi-label">Total Applications</h3>
        <p class="kpi-value">{{ response.data.totalApplications }}</p>
        <p class="kpi-metric">All-time</p>
      </div>
    </div>

    <!-- Avg Applications per Job -->
    <div class="kpi-card">
      <div class="kpi-icon avg-icon">
        <svg viewBox="0 0 24 24" fill="currentColor">
          <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
        </svg>
      </div>
      <div class="kpi-content">
        <h3 class="kpi-label">Avg Apps/Job</h3>
        <p class="kpi-value">{{ response.data.avgApplicationsPerJob | number: '1.1-1' }}</p>
        <p class="kpi-metric">Average</p>
      </div>
    </div>
  </div>
</div>
