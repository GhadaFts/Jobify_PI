<div class="chart-container">
  <div *ngIf="chartData$ | async as response" class="chart-wrapper">
    <h3 class="chart-title">Users Growth - New Users & Daily Active Users</h3>
    <div class="chart-content">
      <div class="metrics-row">
        <div class="metric-card">
          <span class="metric-label">Total New Users (Period)</span>
          <span class="metric-value">{{ getTotalNewUsers(response.data) }}</span>
        </div>
        <div class="metric-card">
          <span class="metric-label">Latest DAU</span>
          <span class="metric-value">{{ response.data[response.data.length - 1]?.dau || 0 }}</span>
        </div>
      </div>
      <div class="table-wrapper">
        <table class="data-table">
          <thead>
            <tr>
              <th>Date</th>
              <th>New Users</th>
              <th>Daily Active</th>
              <th>DAU Growth %</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of getLastTenItems(response.data); let i = index">
              <td>{{ item?.date || '-' }}</td>
              <td class="highlight-new">{{ item?.newUsers || 0 }}</td>
              <td class="highlight-dau">{{ item?.dau || 0 }}</td>
              <td>
                <span class="growth-badge">+{{ getGrowthPercentage(item, i, getLastTenItems(response.data)) }}%</span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
