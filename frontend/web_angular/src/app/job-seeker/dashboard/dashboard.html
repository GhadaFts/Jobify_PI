<div class="flex h-screen">
  <!-- Left Sidebar (Full Height, No Margin) - wrapped to add close button -->
  <div class="left-sidebar-container">
    <app-sidebar 
      [activeSection]="activeSection" 
      (sectionChange)="onSectionChange($event)"
      [navigationItems]="navItems"
      [secondaryItems]="secondaryNavItems"
      subtitle="Career Network"
      profileName="John Doe"
      profileTitle="Software Engineer"
      profileImage="/assets/img.png"
      class="w-64 bg-gray-100 p-0 fixed h-full overflow-y-auto left-sidebar fixed-sidebar" [class.open]="leftOpen" style="left: 0;">
    </app-sidebar>
    <button *ngIf="leftOpen" class="sidebar-close left" (click)="toggleLeft()" aria-label="Close sidebar">✕</button>
  </div>
  <!-- Main Content Area with Proper Margins -->
  <main class="ml-64 mr-80 p-4 jobseeker-main" style="background-color: #F3F4F6; width: calc(100% - 36rem); margin-left: 16rem; margin-right: 20rem;">
    <!-- Backdrop shown when either sidebar is open (click to close) -->
    <div *ngIf="leftOpen || rightOpen" class="sidebar-backdrop" (click)="closeAll()"></div>

    <!-- Mobile left toggle (fixed top-left). Hidden when left sidebar is open -->
    <div class="mobile-left-toggle" [hidden]="leftOpen">
      <button type="button" (click)="toggleLeft()" aria-label="Open menu" class="mobile-toggle">☰</button>
    </div>

    <!-- Mobile right toggle (fixed top-right). Hidden when right sidebar is open -->
    <div class="mobile-right-toggle" [hidden]="rightOpen">
      <button type="button" (click)="toggleRight()" aria-label="Open widgets" class="mobile-toggle">▤</button>
    </div>
    <ng-container [ngSwitch]="activeSection">
       <app-find-job *ngSwitchCase="'find-job'"></app-find-job>
      <app-cv-correction *ngSwitchCase="'cv-correction'"></app-cv-correction>
      <app-job-analyse *ngSwitchCase="'job-analyse'"></app-job-analyse>
      <app-edit-profile *ngSwitchCase="'edit-profile'"></app-edit-profile>
      <app-interview-preparation *ngSwitchCase="'interview-preparation'"></app-interview-preparation>
    </ng-container>
  </main>

  <!-- Right Sidebar - wrapped to add close button -->
  <div class="right-sidebar-container">
    <app-job-seeker-sidebar class="w-80 bg-white jobseeker-right-widgets right-sidebar fixed right-0 top-0 h-screen overflow-y-auto no-scrollbar border-l z-10" [class.open]="rightOpen" style="border-color: #E5E7EB;"></app-job-seeker-sidebar>
    <button *ngIf="rightOpen" class="sidebar-close right" (click)="toggleRight()" aria-label="Close widgets">✕</button>
  </div>
</div>